Assignment 2 - Cloud Services Exercises - Response to Criteria
================================================

Instructions
------------------------------------------------
- Keep this file named A2_response_to_criteria.md, do not change the name
- Upload this file along with your code in the root directory of your project
- Upload this file in the current Markdown format (.md extension)
- Do not delete or rearrange sections.  If you did not attempt a criterion, leave it blank
- Text inside [ ] like [eg. S3 ] are examples and should be removed


Overview
------------------------------------------------

- **Name:** Emerson Small
- **Student number:** n10763139
- **Partner name (if applicable):** N/A
- **Application name:** BLAST App
- **Two line description:** Takes the names of two organisms, retrieves
the relevant FASTA (sequence content) and GFF (genome annotation) files using the
GenBank API, and runs an all-vs-all BLAST (Basic Local Alignment Search Tool) search 
to find the most similar gene of the two given species.
- **EC2 instance name or ID:** i-024995c870c0644de

------------------------------------------------

### Core - First data persistence service

- **AWS service name:** S3
- **What data is being stored?:** Genome files (.GFF and .FASTA)
- **Why is this service suited to this data?:** Files are best suited to blob storage as they do not need to be query-able and are very large.
- **Why is are the other services used not suitable for this data?:** Structured data services can't support files of this size.
- **Bucket name:** n10763139-bucket
- **Video timestamp:** 0:01
- **Relevant files:**
    src/config/s3.js
    worker.js

### Core - Second data persistence service

- **AWS service name:** RDS
- **What data is being stored?:** Genome and BLAST job metadata
- **Why is this service suited to this data?:** The data stored is structured and must be query-able.
- **Why is are the other services used not suitable for this data?:** A NoSQL option could have been used, but blob storage is unsuitable as it is not query-able.
- **Table names:** genomes, job_results, jobs
- **Video timestamp:** 0:50
- **Relevant files:**
    src/config/db.js

### Third data service

- **AWS service name:** SQS
- **What data is being stored?:** Job info to be processed by worker container.
- **Why is this service suited to this data?:** Used to pass messages between different services.
- **Why is are the other services used not suitable for this data?:** SQS provides redundancy mechanisms (message added back to queue if worker fails)
- **Instance name:** n10763139-queue
- **Video timestamp:** 1:18
- **Relevant files:**
    worker.js
    src/services/jobService

### S3 Pre-signed URLs

- **S3 Bucket names:** n10763139-bucket
- **Video timestamp:** 1:50
- **Relevant files:**
    src/config/s3.js
    src/controllers/genomeController

### In-memory cache

- **ElastiCache instance name:**
- **What data is being cached?:** 
- **Why is this data likely to be accessed frequently?:**
- **Video timestamp:**
- **Relevant files:**
    -

### Core - Statelessness

- **What data is stored within your application that is not stored in cloud data services?:** The progress of BLAST processing and intermediate files generated by it.
- **Why is this data not considered persistent state?:** The jobService creates a message on an SQS queue that the worker polls for jobs. The job can be restarted if the worker fails.
- **How does your application ensure data consistency if the app suddenly stops?:** If the worker crashes during a job, the message will be added back to the SQS queue and another worker can pick it up.
- **Relevant files:**
    src/services/jobService
    worker.js

### Graceful handling of persistent connections

- **Type of persistent connection and use:**
- **Method for handling lost connections:**
- **Relevant files:**
    -


### Core - Authentication with Cognito

- **User pool name:** n10763139-pool
- **How are authentication tokens handled by the client?:** A JWT is provided in the response payload.
- **Video timestamp:** 3:04
- **Relevant files:**
    /src/middleware/authMiddleware
    /src/routes/auth
    /src/controllers/authController


### Cognito multi-factor authentication

- **What factors are used for authentication:**
- **Video timestamp:**
- **Relevant files:**
    -

### Cognito federated identities

- **Identity providers used:**
- **Video timestamp:**
- **Relevant files:**
    -

### Cognito groups

- **How are groups used to set permissions?:** 'Admins' user group changes data returned from various endpoints. 
I.e., if admin, /genomes returns all genomes, but if regular user it only returns the genomes for the logged in user.
isAdmin property added to user object by line 30 of authMiddleware.
- **Video timestamp:** 4:12
- **Relevant files:**
    /src/middleware/authMiddleware
    /src/controllers/genomeController

### Core - DNS with Route53

- **Subdomain**:  n10763139.cab432.com
- **Video timestamp:** 5:36

### Parameter store

- **Parameter names:** 
/n10763139/aws/cognito/clientId
/n10763139/aws/cognito/userPoolId
/n10763139/aws/region
/n10763139/aws/s3BucketName
/n10763139/aws/sqsQueueUrl
/n10763139/db/host
/n10763139/db/name
/n10763139/db/port
/n10763139/db/user
/n10763139/genbankApiBaseUrl
/n10763139/port
- **Video timestamp:** 6:20
- **Relevant files:**
    src/config/index.js

### Secrets manager

- **Secrets names:**
n10763139/secrets

Key/value pairs:
DB_PASSWORD
COGNITO_CLIENT_SECRET
GENBANK_API_KEY
JWT_SECRET
- **Video timestamp:** 6:48
- **Relevant files:**
    src/config/index.js

### Infrastructure as code

- **Technology used:**
- **Services deployed:**
- **Video timestamp:**
- **Relevant files:**
    -

### Other (with prior approval only)

- **Description:**
- **Video timestamp:**
- **Relevant files:**
    -

### Other (with prior permission only)

- **Description:**
- **Video timestamp:**
- **Relevant files:**
    -
